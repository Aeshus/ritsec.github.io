---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import type { ImageMetadata } from 'astro';
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/eboard/*')
const eboard = await getCollection('eboard');
---

<section>
  <div class="people">
    {eboard.map(({ data }) => (
      <article class="member">
        <Image 
          src={images["/src/assets/eboard/" + data.image]()} 
          alt={`${data.name}'s face`} 
          height="250px"
          loading="eager"
        />
        <h3>{data.name} <span class="year">'{data.grad_year - 2000}</span></h3>
        <p class="name">{data.id}</p>
        <div class="links">
          <a href={`mailto:${data.email}`} title="Email">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><!-- Icon from Carbon by IBM - undefined --><path fill="currentColor" d="M28 6H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2m-2.2 2L16 14.78L6.2 8ZM4 24V8.91l11.43 7.91a1 1 0 0 0 1.14 0L28 8.91V24Z"/></svg>
          </a>
          <a href={data.linked_in} target="_blank" rel="noopener noreferrer" title="LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><!-- Icon from Carbon by IBM - undefined --><path fill="currentColor" d="M26.2 4H5.8C4.8 4 4 4.8 4 5.7v20.5c0 .9.8 1.7 1.8 1.7h20.4c1 0 1.8-.8 1.8-1.7V5.7c0-.9-.8-1.7-1.8-1.7M11.1 24.4H7.6V13h3.5zm-1.7-13c-1.1 0-2.1-.9-2.1-2.1s.9-2.1 2.1-2.1c1.1 0 2.1.9 2.1 2.1s-1 2.1-2.1 2.1m15.1 12.9H21v-5.6c0-1.3 0-3.1-1.9-3.1S17 17.1 17 18.5v5.7h-3.5V13h3.3v1.5h.1c.5-.9 1.7-1.9 3.4-1.9c3.6 0 4.3 2.4 4.3 5.5v6.2z"/></svg>
          </a>
        </div>
      </article>
    ))}
  </div>
</section>

<style>
  h2 {
    text-align: center;
    margin-bottom: 1rem;
  }

  section {
    max-width: var(--w-lg);
  }

  h3 {
    margin-top: 0.75rem;
    font-size: 1rem;
  }

  :global(.people img) {
    width: 100%;
    height: auto;
    max-width: 100%;
    display: block;
    object-fit: cover;
    overflow: hidden;
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
  }

  .year {
    color: var(--fg-primary);
  }

  article {
    text-align: center;
    background: var(--bg);
    border: 1px solid var(--bg-surface-hover);
    border-radius: 0.5rem;
    width: 250px;
    transition: all 0.2s ease-in-out; 
    box-shadow: 0 1px 3px 0 color-mix(in oklab, var(--fg) 10%, transparent), 0 1px 2px -1px color-mix(in oklab, var(--fg) 10%, transparent);
  }

  article:hover,
  article:focus,
  article:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px 0 color-mix(in oklab, var(--fg) 12%, transparent), 0 2px 4px -2px color-mix(in oklab, var(--fg) 12%, transparent);
  }

  .people {
    display: flex;
    flex-flow: wrap;
    justify-content: center;
    gap: 1rem;
  }

  a {
    color: var(--fg);
    text-decoration: none;
    transition: all 0.2s ease-in-out; 
  }

  a:hover,
  a:active,
  a:focus {
    color: var(--fg-primary);
  }
</style>
