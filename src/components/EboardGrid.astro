---
import { getCollection } from "astro:content";
import { Picture } from "astro:assets";

const eboard = await getCollection("eboard");
---

<div class="eboard-grid">
    {
        eboard.map((member) => (
            <article class="card interactive">
                <div class="card-img eboard-img">
                    <Picture
                        src={member.data.image}
                        alt={"Picture of " + member.data.name}
                        width={600}
                        height={600}
                        class="img"
                        loading="lazy"
                    />
                </div>

                <div class="card-content">
                    <header class="member-header">
                        <h3>{member.data.name}</h3>
                        <div class="role">{member.data.id}</div>
                    </header>

                    <div class="member-meta">
                        <span class="meta-label">Class of</span>
                        <span class="meta-value">{member.data.grad_year}</span>
                    </div>

                    <div class="actions">
                        <a
                            href={"mailto:" + member.data.id + "@ritsec.club"}
                            class="link-button primary small"
                        >
                            Email
                        </a>

                        {member.data.linked_in && (
                            <a
                                href={member.data.linked_in}
                                class="link-button secondary small"
                                target="_blank"
                                rel="noopener noreferrer"
                            >
                                LinkedIn
                            </a>
                        )}
                    </div>
                </div>
            </article>
        ))
    }
</div>

<style>
    .eboard-grid {
        display: flex;
        flex-wrap: wrap;
        gap: var(--padding-lg);
        justify-content: center; /* Center the cards */
    }

    .card.interactive {
        flex: 1 1 300px; /* Grow/Shrink, Base 300px */
        max-width: 400px; /* Prevent becoming "full width" giant cards */
        display: flex;
        flex-direction: column;
    }

    .eboard-img {
        height: 320px; /* Fixed height for consistent headshots */
        width: 100%;
        overflow: hidden;
    }

    .eboard-img :global(img) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center top; /* Focus on faces */
    }

    .card-content {
        display: flex;
        flex-direction: column;
        gap: var(--padding);
        padding: var(--padding);
        flex-grow: 1;
        text-align: left; /* Ensure text aligns nicely */
    }

    .member-header {
        border-bottom: 1px solid var(--border-color);
        padding-bottom: var(--padding-sm);
    }

    h3 {
        margin: 0;
        font-size: 1.25rem;
        line-height: 1.2;
    }

    .role {
        font-family: var(--font-mono);
        color: var(--accent);
        font-size: 0.9rem;
        font-weight: bold;
        margin-top: 0.25rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .member-meta {
        font-size: 0.9rem;
        color: var(--fg);
        opacity: 0.8;
        display: flex;
        gap: 0.5rem;
    }

    .meta-label {
        font-weight: bold;
    }

    .actions {
        margin-top: auto;
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .link-button.small {
        font-size: 0.8rem;
        padding: 4px 10px;
    }
</style>
