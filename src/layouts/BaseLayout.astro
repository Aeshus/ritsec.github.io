---
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Head from "@/components/Head.astro";

import "@fontsource/ibm-plex-sans/400.css";
import "@fontsource/ibm-plex-sans/700.css";
import "@fontsource/ibm-plex-sans/400-italic.css";
import "@fontsource/ibm-plex-sans/700-italic.css";
import "@fontsource/ibm-plex-mono";

interface Props {
    title: string;
    description?: string;
    image?: string;
}

const { title, description, image } = Astro.props;
---

<html lang="en" transition:animate="none">
    <Head title={title} description={description} image={image} />
    <body>
        <Header />
        <main>
            <slot />
        </main>
        <Footer />
    </body>
</html>

<style is:global>
    /*
  Josh's Custom CSS Reset
  https://www.joshwcomeau.com/css/custom-css-reset/
  */

    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    *:not(dialog) {
        margin: 0;
    }

    @media (prefers-reduced-motion: no-preference) {
        html {
            interpolate-size: allow-keywords;
            scroll-behavior: smooth;
        }
    }

    body {
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
    }

    img,
    picture,
    video,
    canvas,
    svg {
        display: block;
        max-width: 100%;
    }

    input,
    button,
    textarea,
    select {
        font: inherit;
    }

    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        overflow-wrap: break-word;
    }

    p {
        text-wrap: pretty;
    }
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        text-wrap: balance;
    }

    #root,
    #__next {
        isolation: isolate;
    }

    /* ---- VARIABLE DEFINITIONS ---- */

    :root {
        --page-width: 120ch;
        --text-width: 610px;
        --font-mono: "IBM Plex Mono", monospace;
        --font-sans: "IBM Plex Sans", sans-serif;

        --page-padding: max(1rem, (100% - var(--page-width)) / 2);

        --padding-lg: 2rem;
        --padding: 1rem;
        --padding-sm: 0.5rem;
        --padding-xs: 0.25rem;

        --gap: 1rem;
        --border: 2px solid var(--border-color);

        --3xl: 4rem;
        --2xl: 3rem;
        --xl: 2rem;
        --lg: 1.5rem;
        --md: 1.125rem;
        --regular: 1rem;
        --sm: 0.9rem;

        --w-bold: 700;
        --w-regular: 400;
    }

    :root {
        --bg: #fcfcfc;
        --bg-panel: rgba(0, 0, 0, 0.02);
        --bg-header: #f3f3f3;

        --fg: #000;
        --border-color: #d3d3d3;
        --border-color-interactable: #c2a483;

        --accent: #e69132;
        --fg-accent: var(--bg);
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --bg: #070f10;
            --bg-panel: rgba(255, 255, 255, 0.06);
            --bg-header: #20262c;

            --fg: #f1f1f1;
            --border-color: #4d4d4d;

            --accent: #e69132;
            --fg-accent: var(--bg);
        }
    }

    /* ----- BASE STYLES ---- */

    html {
        font-family: var(--font-sans);
        color: var(--fg);
        background-color: var(--bg);
        min-height: 100%;
    }

    body {
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
    }

    main {
        flex-grow: 1;
    }

    pre {
        font-family: var(--font-mono);
    }

    h1 strong,
    h2 strong,
    h3 strong,
    h4 strong,
    h5 strong,
    h6 strong {
        color: var(--accent);
    }

    main > section {
        padding: var(--padding-lg) var(--page-padding);
        border-bottom: var(--border);
        background-color: var(--bg);
    }

    section > * {
        margin-bottom: var(--padding);
    }

    h1 {
        font-size: var(--3xl);
        line-height: 1.125;
        margin-bottom: var(--padding);
        font-weight: var(--w-bold);
    }

    h2 {
        font-size: var(--2xl);
        line-height: 1.125;
        margin-bottom: var(--padding);
        font-weight: var(--w-bold);
        scroll-margin-top: 100px;
    }

    h3,
    h4,
    h5,
    h6 {
        font-size: var(--xl);
        line-height: 1.125;
        margin-bottom: var(--padding);
        font-weight: var(--w-bold);
        scroll-margin-top: 100px;
    }

    h1 strong,
    h2 strong,
    h3 strong,
    h4 strong,
    h5 strong,
    h6 strong {
        color: var(--accent);
    }

    main > section > p,
    .text {
        max-width: var(--text-width);
    }

    @media (max-width: 1000px) {
        main > section {
            text-align: center;
        }

        main > section > p,
        .text {
            margin: auto;
            margin-bottom: var(--padding);
        }

        main > section > h2 {
            font-size: var(--xl);
        }

        h1 {
            font-size: var(--2xl);
        }

        h2 {
            font-size: var(--xl);
        }

        h3,
        h4,
        h5,
        h6 {
            font-size: var(--lg);
        }
    }

    /* Common Styles */

    .accent {
        color: var(--accent);
    }

    time {
        white-space: nowrap;
    }

    /* Cards */

    .card {
        background-color: var(--bg-panel);
        border: var(--border);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        text-align: start;
    }

    .card-content {
        padding: var(--padding-lg);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        flex-grow: 1;
        width: 100%;
    }

    .card-header {
        padding: var(--padding-lg);
        background-color: var(--fg);
        color: var(--bg);
        width: 100%;
    }

    .card-header:has(+ .card-content) {
        padding-bottom: 1rem;
    }

    .card-img {
        overflow: hidden;
        width: 100%;
    }

    .card-img > img {
        object-fit: cover;
        width: 100%;
        height: 100%;
        object-position: center;
        display: block;
    }

    .img-card {
        padding: var(--padding-sm);
    }

    .chip {
        display: inline-block;
        background-color: var(--bg-panel);
        color: var(--fg);
        padding: var(--padding-xs) var(--padding-sm);
        margin-bottom: var(--padding);
    }

    .list {
        display: flex;
        gap: var(--padding);
        flex-wrap: wrap;
        flex-direction: row;
    }

    .col {
        flex-direction: column;
    }

    a.card {
        border-color: var(--border-color-interactable);
        color: inherit;
        text-decoration: none;
    }

    a.card:hover,
    a.card:focus,
    a.card:active {
        border-color: var(--accent);
    }

    .carousel .card {
        height: 100%;
    }

    @media (max-width: 1000px) {
        .list {
            justify-content: center;
        }
    }

    /* Slideshow */

    .carousel {
        overflow: hidden;
    }

    .slide-container {
        display: flex;
        flex-direction: row;
        margin-left: calc(var(--padding) * -1);
    }

    .slide {
        flex: 0 0 33.333333333333%;
        min-width: 0;
        padding-left: var(--padding);
    }

    .grid-content {
        display: flex;
        padding: unset;
        flex: 0 0 calc((100% - (var(--padding) * 2)) / 3);
    }

    @media (max-width: 1000px) {
        .slide {
            flex: 0 0 50%;
        }

        .grid-content {
            flex: 0 0 calc((100% - var(--padding)) / 2);
        }
    }

    @media (max-width: 700px) {
        .slide {
            flex: 0 0 100%;
        }

        .grid-content {
            flex: 0 0 100%;
        }
    }

    /* Buttons */

    .link-button {
        display: inline-block;
        font-family: var(--font-mono);
        font-size: var(--md);
        padding: var(--padding-xs) var(--padding-sm);
        text-decoration: none;
        color: var(--fg);
        transition: color 0.1s linear;
        transition: background-color 0.1s linear;
    }
    .link-button:hover,
    .link-button:active,
    .link-button:focus {
        color: var(--bg);
        background-color: var(--fg);
    }

    .link-button.primary {
        color: var(--bg);
        background-color: var(--fg);
    }
    .link-button.primary:hover,
    .link-button.primary:active,
    .link-button.primary:focus {
        background-color: var(--accent);
        color: var(--fg-accent);
    }
    .link-button.secondary {
        outline: 2px solid var(--fg);
        outline-offset: -2px;
    }
    .link-button.secondary:hover,
    .link-button.secondary:active,
    .link-button.secondary:focus {
        background-color: var(--accent);
        color: var(--fg-accent);
        outline-color: var(--accent);
    }

    .link-button.secondary-accent {
        outline: 2px solid var(--accent);
        outline-offset: -2px;
        color: var(--accent);
    }

    .link-button.secondary-accent:hover,
    .link-button.secondary-accent:active,
    .link-button.secondary-accent:focus {
        background-color: unset;
        color: var(--fg);
    }

    /* Schedule */

    .schedule-left {
        display: flex;
        gap: var(--padding);
        width: 150px;
        white-space: pre-wrap;
    }

    .schedule-middle {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .schedule-right {
        text-align: end;
    }

    @media (max-width: 700px) {
        .schedule {
            flex-direction: column;
        }

        .schedule-left {
            text-align: center;
            margin: auto;
        }

        .schedule-middle {
            align-items: center;
            order: -1;
            font-size: var(--lg);
        }

        .schedule-right {
            text-align: center;
        }
    }

    astro-island {
        /* This is a really ugly hack but this makes it so the schedule works */
        display: block !important; 
    }
</style>
